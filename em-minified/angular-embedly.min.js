var angularEmbedly=angular.module("angular-embedly",[]);!function(e){e.provider("embedlyService",function(){function e(e){this.embed=function(d,n){var o=encodeURI(d),r="http://api.embed.ly/1/oembed?key="+t+"&url="+o;return"undefined"!=typeof n&&(r=r+"&maxwidth="+n),e({method:"GET",url:r})},this.extract=function(d){var n=encodeURI(d),o="http://api.embed.ly/1/extract?key="+t+"&url="+n;return e({method:"GET",url:o})}}var t;this.setKey=function(e){return t=e},this.getKey=function(){return t},this.$get=["$http",function(t){return new e(t)}]})}(angularEmbedly),function(e){e.controller("emEmbedCtrl",["$scope",function(e){e.embedCode=""}])}(angularEmbedly),function(e){e.directive("emEmbed",["embedlyService",function(e){return{restrict:"E",scope:{urlsearch:"@",maxwidth:"@",onempty:"&"},controller:"emEmbedCtrl",link:function(t,d){function n(){void 0!=t.onempty&&"function"==typeof t.onempty&&t.onempty()}t.$parent.loading_embedly=!1,t.$watch("urlsearch",function(o){var r=t.embedCode;o&&(t.$parent.loading_embedly=!0,e.embed(o,t.maxwidth).then(function(e){switch(t.$parent.loading_embedly=!1,e.data.type){case"video":void 0==e.data.html?n():t.embedCode=e.data.html;break;case"photo":void 0==e.data.url?n():t.embedCode='<img src="'+e.data.url+'">';break;default:n(),t.embedCode=""}r!==t.embedCode&&d.html("<div>"+t.embedCode+"</div>")},function(){t.$parent.loading_embedly=!1;var e=t.embedCode;t.embedCode="",e!==t.embedCode&&d.html("<div>"+t.embedCode+"</div>")}))})}}}])}(angularEmbedly);